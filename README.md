The codes serve the published paper Transforming public transport depots into profitable energy hubs (https://www.nature.com/articles/s41560-024-01580-0). 

1.The core codes (excluding GPS data processing) are run based on three computers with Matlab versions of 2016b, 2021b, and 2023b. The Gurobi 11.0.1 is called by Yalmip tool in matlab. 
2.“schedule_data1” is a key data table to include the bus trip, layover, and energy consumption information for each bus. A sample table of one bus (No. 25541) is provided to illustrate the table structure.  
3.Some parameters occurred in codes are not provided by data availability statement. For example, bus vehicle and bus depot information. We do not have rights to share these information according to related agreements with data providers. 
Please feel free to contact me (xiaohanl@chalmers.se) for any problems.     
